
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Modules Â· PEP root6 workshop</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-panels/panels.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-block-align/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../css/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="learning.html" />
    
    
    <link rel="prev" href="scripting.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../introduction.html">
            
                <a href="../introduction.html">
            
                    
                    Part 1 - Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../feat1.html">
            
                <a href="../feat1.html">
            
                    
                    Part 2 - New C++ features
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../feat2.html">
            
                <a href="../feat2.html">
            
                    
                    Part 3 - Smart (and dumb) pointers
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../newf2/intro.html">
            
                <a href="../newf2/intro.html">
            
                    
                    Pointers, the absolute basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../newf2/smartp.html">
            
                <a href="../newf2/smartp.html">
            
                    
                    Smart pointers
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../parallellism.html">
            
                <a href="../parallellism.html">
            
                    
                    Part 4 - Parallellism
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../parallell/intro.html">
            
                <a href="../parallell/intro.html">
            
                    
                    Threads and processes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../parallell/example.html">
            
                <a href="../parallell/example.html">
            
                    
                    Posix multithreading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../parallell/root.html">
            
                <a href="../parallell/root.html">
            
                    
                    Parallellism with ROOT
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../changes.html">
            
                <a href="../changes.html">
            
                    
                    Part 5 - 5 to 6: changes to user code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../vectorization.html">
            
                <a href="../vectorization.html">
            
                    
                    Part 6 - Vectorization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../tdf/declarative.html">
            
                <a href="../tdf/declarative.html">
            
                    
                    Part 7 - Declarative analysis
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../tdf/concept.html">
            
                <a href="../tdf/concept.html">
            
                    
                    Declarative programming
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../tdf/TDataFrame.html">
            
                <a href="../tdf/TDataFrame.html">
            
                    
                    TDataFrame
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../tdf/more.html">
            
                <a href="../tdf/more.html">
            
                    
                    Additional material
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="./">
            
                <a href="./">
            
                    
                    Part 8 - Python
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="running.html">
            
                <a href="running.html">
            
                    
                    Running
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="operators.html">
            
                <a href="operators.html">
            
                    
                    Objects and operators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="numbers.html">
            
                <a href="numbers.html">
            
                    
                    Numbers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="strings.html">
            
                <a href="strings.html">
            
                    
                    Strings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="lists.html">
            
                <a href="lists.html">
            
                    
                    Lists and looping
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="dictionaries.html">
            
                <a href="dictionaries.html">
            
                    
                    Dictionaries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="conditions.html">
            
                <a href="conditions.html">
            
                    
                    Conditions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="methods.html">
            
                <a href="methods.html">
            
                    
                    Methods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="scripting.html">
            
                <a href="scripting.html">
            
                    
                    Scripting
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.9.10" data-path="modules.html">
            
                <a href="modules.html">
            
                    
                    Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.11" data-path="learning.html">
            
                <a href="learning.html">
            
                    
                    Learning more
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.12" data-path="pyroot.html">
            
                <a href="pyroot.html">
            
                    
                    PyROOT
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../bestprac/best_prac.html">
            
                <a href="../bestprac/best_prac.html">
            
                    
                    Part 9 - Best Practices
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../bestprac/preparing.html">
            
                <a href="../bestprac/preparing.html">
            
                    
                    Preparing your code for debugging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../bestprac/general.html">
            
                <a href="../bestprac/general.html">
            
                    
                    Some general programming tips
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../bestprac/crash.html">
            
                <a href="../bestprac/crash.html">
            
                    
                    Where does my code crash
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../bestprac/memory.html">
            
                <a href="../bestprac/memory.html">
            
                    
                    Finding memory leaks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Modules</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="modules">Modules</h1>
<p>Python comes with lots of useful stuff, which is provided with modules
(and submodules, see later).
We have already met the maths module, but did not talk about how we started using it.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> math
<span class="hljs-meta">&gt;&gt;&gt; </span>math
&lt;module <span class="hljs-string">&apos;math&apos;</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;/usr/lib/python2.7/lib-dynload/math.so&apos;</span>&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>math.pi
<span class="hljs-number">3.141592653589793</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>math.sin(<span class="hljs-number">1</span>)
<span class="hljs-number">0.8414709848078965</span>
</code></pre>
<p>The path after <code>from</code> might look different on your computer.</p>
<p>So, <code>math</code> is a <em>module</em>, and this seems to behave a lot like other objects we
have met: it is a container with properties and methods attached that we can
access with the dot operator <code>.</code>. Actually, that is pretty much all there is to
them.</p>
<h2 id="using-modules-into-your-code-import">Using modules into your code: import</h2>
<p>The keyword <code>import</code>, usually specified at the beginning of your source code, is
used to tell Python what modules you want to make available to your current
code.</p>
<p>There are different ways of specifying an import. The one we have seen already
simply makes the module available to you:</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> random
<span class="hljs-meta">&gt;&gt;&gt; </span>random.uniform(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)
<span class="hljs-number">0.5877109428927353</span>
</code></pre>
<p>The module <code>random</code> contains functions useful for random number generation: with
the <code>import</code> above, we have made the <code>random</code> module accessible, and everything
within that module is accessible via the syntax <code>random.&lt;name&gt;</code>. For the record,
the <code>uniform(x,y)</code> method returns a pseudo-random number within the range
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">[x,y]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">[</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose">]</span></span></span></span>.</p>
<p>Sometimes you want to make only one or more things from a given module
accessible: Python gives you the ability to import just those:</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> uniform, choice
<span class="hljs-meta">&gt;&gt;&gt; </span>uniform(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)
<span class="hljs-number">0.4059007502204043</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>choice([ <span class="hljs-number">33</span>, <span class="hljs-number">56</span>, <span class="hljs-number">42</span>, <span class="hljs-number">-1</span> ])
<span class="hljs-number">42</span>
</code></pre>
<p>In this case the <code>uniform</code> and <code>choice</code> names are available <em>directly</em>, <em>i.e.</em>
without using the <code>random</code> prefix. All other functions in the <code>random</code> module
are not available in this case. For the record, the <code>choice</code> function returns a
random element from a given collection.</p>
<p>Another option is to import <em>all</em> functions of a certain module and make them
available without a prefix:</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> *
<span class="hljs-meta">&gt;&gt;&gt; </span>gauss(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)
<span class="hljs-number">-1.639334770284028</span>
</code></pre>
<p>This is not that recommended as you generally do not know what is the extent
of what you are importing and you might end up with name clashes between your
current code and the imported module, as it will all be in the same namespace,
meaning directly available with no need for a <code>.&lt;name&gt;</code> syntax. </p>
<p>Lastly, it is possible to import modules, or specific names from a module,
under an alias.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> uniform <span class="hljs-keyword">as</span> uni
<span class="hljs-meta">&gt;&gt;&gt; </span>uni(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)
<span class="hljs-number">0.7288973406605329</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
np.arccos(<span class="hljs-number">1</span>)
<span class="hljs-number">0.0</span>
</code></pre>
<p>This option is useful when you need to assign shorter aliases to names you will
use frequently. In particular, the alias <code>np</code> for the <code>numpy</code> module will be
encountered a lot.</p>
<p>Note that modules can have submodules, specified with extra dots <code>.</code>:</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> os.path <span class="hljs-keyword">import</span> abspath
<span class="hljs-meta">&gt;&gt;&gt; </span>abspath(<span class="hljs-string">&apos;..&apos;</span>)
<span class="hljs-string">&apos;/afs/cern.ch/user/d&apos;</span>
</code></pre>
<p>When importing a module, its <strong>submodules are not available by default and you
must import them explicitly</strong>:</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> os
<span class="hljs-meta">&gt;&gt;&gt; </span>os.getcwd()
<span class="hljs-string">&apos;/afs/cern.ch/user/d/dberzano&apos;</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> os.path
<span class="hljs-meta">&gt;&gt;&gt; </span>os.path.basename(os.getcwd())
<span class="hljs-string">&apos;dberzano&apos;</span>
</code></pre>
<p>Note that due to the current Python implementation of the <code>os</code> module, <code>os.path</code>
functions are <em>actually</em> available <em>even without importing <code>os.path</code>. But just
<code>os</code></em>. You cannot and should not rely on this implementation, which represents an exception
and might change in the future. Always import submodules explicitly!</p>
<p>It is also possible to import several modules with a single import command:</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> os, sys, math
</code></pre>
<p>but this is <a href="https://www.python.org/dev/peps/pep-0008/#imports" target="_blank">not recommended by the Python style guide</a>, which
suggests to use several import statements, one per module, as it improves
readability:</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> os
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> sys
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> math
</code></pre>
<p>If you need to import several names from a single module, you can split an import
function over multiple lines:</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> (
<span class="hljs-meta">... </span>    exp,
<span class="hljs-meta">... </span>    log,
<span class="hljs-meta">... </span>    e,
<span class="hljs-meta">... </span>    floor
<span class="hljs-meta">... </span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>floor(exp(log(e)))
<span class="hljs-number">2.0</span>
</code></pre>
<h2 id="the-standard-library">The standard library</h2>
<p>The set of things that Python comes with, from all of the types of objects to
all of the different modules, is called the <a href="https://docs.python.org/2/library/index.html" target="_blank">standard library</a>. It is
recommended to browse through the standard library documentation to see what is
available: Python is rich of standard modules, and you should reuse them as much
as possible instead of rewriting code on your own.</p>
<p>Some of the categories for which standard modules are available are:</p>
<ul>
<li>processing paths</li>
<li>date and time manipulation</li>
<li>mathematical functions</li>
<li>parsing of certain file formats</li>
<li>support for multiple processes and threads</li>
<li>...</li>
</ul>
<p>Use standard Python library modules with confidence: being part of any standard
Python distribution, your code will be easily portable.</p>
<h2 id="modules-from-pypi">Modules from PyPi</h2>
<p>Many external modules can be found on <a href="https://pypi.python.org/pypi" target="_blank">PyPi</a>, the Python Package Index repository.
Some of those modules are
already part of some Python distributions (such as <a href="https://www.anaconda.com/" target="_blank">Anaconda</a>, which
comes with more than a thousand science-oriented modules preinstalled).</p>
<p>If a certain module you need is not available on your distribution you can
easily install it with the <code>pip</code> shell command. Since you typically do not have write
access to the standard Python installation&apos;s directories, <code>pip</code> allows you to
install modules only for yourself, under your current user&apos;s home directory.
It is recommended to set up in your shell startup script (such as <code>~/.bashrc</code>)
the following two lines telling once and for all where to install and search for
Python user modules:</p>
<pre><code class="lang-bash"><span class="hljs-built_in">export</span> PYTHONUSERBASE=<span class="hljs-variable">$HOME</span>/.local
<span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$PYTHONUSERBASE</span>/bin:<span class="hljs-variable">$PATH</span>
</code></pre>
<p>Once you have done that, close your current terminal window and open a new one,
and you will be ready to use <code>pip</code>. We will see in a later lesson how to install
the <code>root_pandas</code> module with:</p>
<pre><code class="lang-bash">pip install --user root_pandas
</code></pre>
<h2 id="write-your-first-python-module">Write your first Python module</h2>
<p>The simplest Python module you can write is just a <code>.py</code> file with some
functions inside:</p>
<pre><code class="lang-python"><span class="hljs-comment"># myfirstmodule.py</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">one</span><span class="hljs-params">()</span>:</span>
    print(<span class="hljs-string">&apos;this is my first function&apos;</span>)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">two</span><span class="hljs-params">()</span>:</span>
    print(<span class="hljs-string">&apos;this is my second function&apos;</span>)
</code></pre>
<p>You can now fire an <code>ipython</code> shell and use those functions right away:</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> myfirstmodule
<span class="hljs-meta">&gt;&gt;&gt; </span>myfirstmodule.one()
this <span class="hljs-keyword">is</span> my first function
<span class="hljs-meta">&gt;&gt;&gt; </span>myfirstmodule.two()
this <span class="hljs-keyword">is</span> my second function
</code></pre>
<p>By simply calling the file <code>myfirstmodule.py</code> we have made it available as a
module named <code>myfirstmodule</code> - given that the file is in the same directory
where we have launched the Python interpreter.</p>
<p><div class="panel panel-primary"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(8155480046);" id="module-name-restrictions"><i class="fa fa-info-circle"></i> Module name restrictions<span id="heading-8155480046"></span></h3></div><div class="panel-body" id="panel-8155480046"><p>Note that you cannot pick any name you want for a module! From the
[Python style guide][pep8-modulenames], we gather that we should use &quot;short,
all-lowercase names&quot;. As a matter of fact, if we used dashes in the file name,
we would have ended up with a syntax error while trying to load it:</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> my-first-module
  File <span class="hljs-string">&quot;&lt;ipython-input-1-ef292d9e19fe&gt;&quot;</span>, line <span class="hljs-number">1</span>
    <span class="hljs-keyword">import</span> my-first-module
             ^
SyntaxError: invalid syntax
</code></pre>
<p>Python treats <code>-</code> as a minus and does not understand your intentions.</p>
</div></div></p>
<h2 id="write-a-structured-module">Write a structured module</h2>
<p>Let&apos;s now create a more structured module, with submodules and different files.
We can start from the <code>myfirstmodule.py</code> file and create a directory structure:</p>
<pre><code class="lang-bash">$ mkdir yabba
$ cp myfirstmodule.py yabba/__init__.py
</code></pre>
<p>We have reused the same file created before, copied it into a directory called
<code>yabba</code> and renamed it to <code>__init__.py</code>. The double underscore should ring a
bell: this is a Python special name, and it represents the &quot;main file&quot; within
a module, whereas the directory name now represents the module name.</p>
<p>This means that our module is called <code>yabba</code>, and if we import it, functions
from <code>__init__.py</code> will be available:</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> yabba
<span class="hljs-meta">&gt;&gt;&gt; </span>yabba.one()
this <span class="hljs-keyword">is</span> my first function
<span class="hljs-meta">&gt;&gt;&gt; </span>yabba.two()
this <span class="hljs-keyword">is</span> my second function
</code></pre>
<p>We can create an additional file inside the <code>yabba</code> directory, say
<code>yabba/extra.py</code> and have more functions there:</p>
<pre><code class="lang-python"><span class="hljs-comment"># yabba/extra.py</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">three</span><span class="hljs-params">()</span>:</span>
  <span class="hljs-keyword">print</span> <span class="hljs-string">&apos;this function will return the number three&apos;</span>
  <span class="hljs-keyword">return</span> <span class="hljs-number">3</span>
</code></pre>
<p>We have effectively made <code>extra</code> a submodule of <code>yabba</code>. Let&apos;s try:</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> yabba
<span class="hljs-meta">&gt;&gt;&gt; </span>filter(<span class="hljs-keyword">lambda</span> x: <span class="hljs-keyword">not</span> x.startswith(<span class="hljs-string">&apos;__&apos;</span>), dir(yabba))
[<span class="hljs-string">&apos;one&apos;</span>, <span class="hljs-string">&apos;two&apos;</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> yabba.extra
<span class="hljs-meta">&gt;&gt;&gt; </span>yabba.extra.three()
yabba.extra.three()
this function will <span class="hljs-keyword">return</span> the number three
<span class="hljs-number">3</span>
</code></pre>
<p><div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(7737578954);" id="what-have-i-done-with-the-filter-function"><i class="fa fa-square-o"></i> What have I done with the filter function?<span id="heading-7737578954"></span></h3></div><div class="panel-body" id="panel-7737578954"><p>We have used the filter function above to list the functions we have defined
in our module. Can you describe in detail what the commands above do?</p>
<div class="panel panel-danger"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(5648782037);" id="solutionclick-to-expand"><i class="fa fa-line-chart"></i> Solution<span id="heading-5648782037">Click to expand</span></h3></div><div class="panel-body" style="display: none" id="panel-5648782037"><p>The <code>dir(module)</code> command lists all <em>names</em> (not necessarily functions, not
necessarily defined by us) contained in a given imported module. We have used the
<code>filter()</code> command to filter out all names starting with two underscores. Every
item returned by <code>dir()</code> is passed as <code>x</code> to the lambda function which returns
<code>True</code> or <code>False</code>, determining whether the <code>filter()</code> function should keep or
discard the current element.</p>
</div></div></div></div></p>
<h2 id="run-a-module">Run a module</h2>
<p>We can make a Python module that can be easily imported by other Python
programs, but we can also make it in a way that it can be run directly as a
Python script.</p>
<p>Let&apos;s write this special module and call it <code>runnable.py</code>:</p>
<pre><code class="lang-python"><span class="hljs-comment">#!/usr/bin/env python</span>

long_format = <span class="hljs-keyword">False</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">print_label</span><span class="hljs-params">(label, msg)</span>:</span>
    <span class="hljs-keyword">if</span> long_format:
        out = <span class="hljs-string">&apos;{0}: {1}&apos;</span>.format(label.upper(), str(msg))
    <span class="hljs-keyword">else</span>:
        out = <span class="hljs-string">&apos;{0}-{1}&apos;</span>.format(label[<span class="hljs-number">0</span>].upper(), str(msg))
    <span class="hljs-keyword">print</span> out

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">debug</span><span class="hljs-params">(msg)</span>:</span>
    print_label(<span class="hljs-string">&apos;debug&apos;</span>, msg)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">warning</span><span class="hljs-params">(msg)</span>:</span>
    print_label(<span class="hljs-string">&apos;warning&apos;</span>, msg)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&apos;__main__&apos;</span>:
    <span class="hljs-keyword">print</span> <span class="hljs-string">&apos;*** Testing print functions ***&apos;</span>
    debug(<span class="hljs-string">&apos;This is a debug message&apos;</span>)
    long_format = <span class="hljs-keyword">True</span>
    warning(<span class="hljs-string">&apos;This is a warning message with a long label&apos;</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-keyword">print</span> <span class="hljs-string">&apos;Module {0} is being imported&apos;</span>.format(__name__)
</code></pre>
<p>Now let&apos;s make it executable:</p>
<pre><code class="lang-bash">$ chmod +x runnable.py
</code></pre>
<p>It can be now run as a normal executable from your shell:</p>
<pre><code>$ ./runnable.py
*** Testing print functions ***
D-This is a debug message
WARNING: This is a warning message with a long label
</code></pre><p>There are two outstanding notions here. First off, the first line is a
&quot;shebang&quot;: it really has to be the <em>first</em> line in a file (it cannot be the
second, or &quot;one of the first&quot;, or the first non-empty) and it basically tells
your shell that your executable text file has to be interpreted by the current
Python interpreter. Just use this line as it is.</p>
<p>Secondly, we notice we have a peculiar <code>if</code> condition with a block that gets
executed when we run the file. <code>__name__</code> is a special internal Python variable
which is set to the module name in case the module is imported. When the module
is ran, it is set to the special value <code>&quot;__main__&quot;</code>.</p>
<p>The <code>else:</code> condition we have added is just to show what happens when you import
the module instead:</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> runnable
Module runnable <span class="hljs-keyword">is</span> being imported
<span class="hljs-meta">&gt;&gt;&gt; </span>runnable.warning(<span class="hljs-string">&apos;hey I can use it from here too&apos;</span>)
W-hey I can use it <span class="hljs-keyword">from</span> here too
</code></pre>
<p>Now, the <code>if</code> condition is not necessary when you want to run the module - those
lines in the <code>if</code> block will be executed anyway. It is however used to <em>prevent</em>
some lines from being executed when you import the file as a module.</p>
<p>Please also note that module imports are typically <em>silent</em>, so the <code>else:</code>
condition with a printout would not exist in real life.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="scripting.html" class="navigation navigation-prev " aria-label="Previous page: Scripting">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="learning.html" class="navigation navigation-next " aria-label="Next page: Learning more">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Modules","level":"1.9.10","depth":2,"next":{"title":"Learning more","level":"1.9.11","depth":2,"path":"analysis/python/learning.md","ref":"analysis/python/learning.md","articles":[]},"previous":{"title":"Scripting","level":"1.9.9","depth":2,"path":"analysis/python/scripting.md","ref":"analysis/python/scripting.md","articles":[]},"dir":"ltr"},"config":{"plugins":["katex","panels@git+https://github.com/lhcb/gitbook-plugin-panels.git#117012fdc18c96831cb88196980c0ea73b0c87b8","collapsible-menu","block-align"],"styles":{"website":"css/website.css"},"pluginsConfig":{"collapsible-menu":{},"block-align":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"panels":{},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"PEP root6 workshop","gitbook":"*","description":"PEP root6 introduction material"},"file":{"path":"analysis/python/modules.md","mtime":"2018-11-14T14:49:37.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-08-05T09:20:43.977Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-panels/panels.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

